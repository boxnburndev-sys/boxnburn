<!--
   ____     U  ___ u __  __        _   _           ____     _   _    ____     _   _     
U | __")u    \/"_ \/ \ \/"/       | \ |"|       U | __")uU |"|u| |U |  _"\ u | \ |"|    
 \|  _ \/    | | | | /\  /\      <|  \| |>       \|  _ \/ \| |\| | \| |_) |/<|  \| |>   
  | |_) |.-,_| |_| |U /  \ u     U| |\  |u        | |_) |  | |_| |  |  _ <  U| |\  |u   
  |____/  \_)-\___/  /_/\_\       |_| \_|         |____/  <<\___/   |_| \_\  |_| \_|    
 _|| \\_       \\  ,-,>> \\_      ||   \\,-.     _|| \\_ (__) )(    //   \\_ ||   \\,-. 
(__) (__)     (__)  \_)  (__)     (_")  (_/     (__) (__)    (__)  (__)  (__)(_")  (_/  
-->

<!doctype html>
<html lang="nl">
<head>
  <script src="favicon.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Box N Burn - Jobs</title>
  <meta name="description" content="Box N Burn: Bekijk openstaande jobs en solliciteer eenvoudig online." />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    /* (styles unchanged, omitted for brevity) */
  </style>
</head>
<body>
  <div id="preloader">
    <div class="loader"></div>
    Laden...
  </div>
  <header>
    <div class="brand">
      <img src="https://i.ibb.co/bj5mBF0t/Box-N-Burn-Algemeen.png" alt="Box N Burn logo">
      <div>
        <div class="title">Box N Burn Jobs</div>
        <div class="small muted">Bekijk openstaande posities</div>
      </div>
    </div>
    <nav>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="#jobs" class="active">Jobs</a>
        <a href="#contact">Contact</a>
      </div>
      <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
      <div class="nav-links mobile" id="mobileMenu">
        <a href="/">Home</a>
        <a href="#jobs">Jobs</a>
        <a href="#contact">Contact</a>
      </div>
    </nav>
  </header>
  <main class="container">
    <section id="jobs">
      <h2>Openstaande Vacatures</h2>
      <div class="jobs" id="jobsContainer"></div>
    </section>
    <section id="contact" style="margin-top:40px">
      <h2>Algemeen Contact</h2>
      <p class="muted">Heb je vragen over vacatures of wil je spontaan solliciteren? Vul het formulier in.</p>
      <form data-job="Algemeen Contact">
        <input type="text" name="name" placeholder="Naam" required>
        <input type="number" name="age" placeholder="Leeftijd" required>
        <input type="email" name="email" placeholder="E-mail" required>
        <input type="tel" name="phone" placeholder="Telefoonnummer" required>
        <button type="submit" class="btn primary">Verstuur</button>
        <div class="message"></div>
      </form>
    </section>
    <footer>
      <div>&copy; 2025 Box N Burn â€” Alle rechten voorbehouden</div>
      <div class="muted">Jobs Portal</div>
    </footer>
  </main>
  <script>
    const sheetId="13VmSUVWPTmlHNN8QREDodih8AKb56114FLQg5-1wyjo"
    const apiKey="AIzaSyDCIoC-dzEh-ptJVTEfhLH7FgrUWYcqKL4"

    // ðŸ”‘ Web3Forms endpoint + key
    const endpoint="https://api.web3forms.com/submit"
    const accessKey="3287ed1d-2d60-4665-b739-2cf29b3de670"

    async function loadJobs(){
      const url=`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/JobApp!A2:C?key=${apiKey}`
      const res=await fetch(url)
      const data=await res.json()
      const jobsContainer=document.getElementById("jobsContainer")
      jobsContainer.innerHTML=""
      if(!data.values)return
      data.values.forEach((row,i)=>{
        const [title,desc,req]=row
        const card=document.createElement("div")
        card.className="job-card"
        card.innerHTML=`
          <h3>${title||""}</h3>
          <p>${desc||""}</p>
          ${req?`<p><strong>Vereisten:</strong> ${req}</p>`:""}
          <details>
            <summary>Solliciteer</summary>
            <form data-job="${title||"Onbekend"}">
              <input type="text" name="name" placeholder="Naam" required>
              <input type="number" name="age" placeholder="Leeftijd" required>
              <input type="email" name="email" placeholder="E-mail" required>
              <input type="tel" name="phone" placeholder="Telefoonnummer" required>
              <button type="submit" class="btn primary">Verstuur</button>
              <div class="message"></div>
            </form>
          </details>`
        jobsContainer.appendChild(card)
        setTimeout(()=>{card.classList.add("visible")},200*i+200)
      })
    }

    document.addEventListener("submit",async e=>{
      if(e.target.tagName==="FORM"){
        e.preventDefault()
        const form=e.target
        const msg=form.querySelector(".message")
        msg.textContent="Bezig met versturen..."
        msg.className="message"

        // Build FormData for Web3Forms
        const fd=new FormData(form)
        fd.append("access_key", accessKey)
        fd.append("job", form.getAttribute("data-job")||"Onbekend")
        fd.append("botcheck","") // basic spam field

        try{
          const res=await fetch(endpoint,{method:"POST",body:fd})
          if(res.ok){
            msg.textContent="Bedankt! Je aanvraag is verzonden."
            msg.classList.add("success")
            form.reset()
          } else {
            msg.textContent="Er ging iets mis. Probeer later opnieuw."
            msg.classList.add("error")
          }
        }catch(err){
          msg.textContent="Fout bij verzenden."
          msg.classList.add("error")
        }
      }
    })

    window.addEventListener("load",()=>{
      const preloader=document.getElementById("preloader")
      setTimeout(()=>{
        preloader.classList.add("fade")
        document.body.classList.add("loaded")
        document.querySelector("header").classList.add("visible")
        document.querySelector(".container").classList.add("visible")
        document.querySelector("footer").classList.add("visible")
        loadJobs()
      },800)
    })

    document.querySelectorAll("a[href]").forEach(a=>{
      a.addEventListener("click",e=>{
        if(a.getAttribute("href").startsWith("#"))return
        e.preventDefault()
        document.body.style.opacity=0
        setTimeout(()=>{window.location=a.href},400)
      })
    })

    const hamburger=document.getElementById("hamburger")
    const mobileMenu=document.getElementById("mobileMenu")
    hamburger.addEventListener("click",()=>{mobileMenu.classList.toggle("show")})
  </script>
</body>
</html>



